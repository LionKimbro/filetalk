{
  "specification": {
    "name": "JSON Run Cards",
    "document_id": "runcards.spec.core_formats.v0_2",
    "version": "v0.2",
    "title": "JSON Run Cards: Job Cards and Report Cards",
    "created": "2026-01-27",
    "authors": [
      "Lion Kimbro",
      "ChatGPT (Wing-Cat)"
    ],
    "scope": "epoch-agnostic",
    "status": "stable",
    "description": "Defines standard JSON envelopes for invoking programs (called 'job cards') and for returning standardized execution results (called 'report cards')."
  },

  "job-card": {
    "required_top_level_keys": [
      "type",
      "STANDARD",
      "ARGS"
    ],
    "type_field": {
      "required_value": "json-job-card"
    },
    "STANDARD": {
      "description": "Standard invocation metadata understood by Run Card infrastructure and programs. All fields are optional unless otherwise specified by program contracts.",
      "fields_optional": {
        "report-card-file": {
          "type": "string",
          "description": "Filesystem path where the invoked program should write its report card."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp when the job card was created, expressed as seconds since Unix epoch with optional decimal fractions. Example: \"1737848123.527000\""
        },
        "job-id": {
          "type": "string",
          "description": "Caller-generated identifier for correlating this job with report cards, logs, and external systems."
        }
      },
      "extension_policy": "Additional STANDARD fields may be added in future versions. Programs must ignore unknown keys."
    },
    "ARGS": {
      "description": "Program-specific arguments. Structure is entirely defined by the invoked program.",
      "type": "object",
      "extension_policy": "Run Card infrastructure must not interpret ARGS contents."
    }
  },

  "report-card": {
    "required_top_level_keys": [
      "type",
      "STANDARD",
      "CUSTOM"
    ],
    "type_field": {
      "required_value": "json-report-card"
    },
    "STANDARD": {
      "description": "Standard execution metadata and optional observability data. STANDARD must exist, but all contained fields are optional.",
      "fields_optional": {
        "complete": {
          "type": "boolean",
          "description": "True if the program completed its intended task. False if it failed, aborted, or only partially completed."
        },
        "status": {
          "type": "string",
          "description": "Optional textual status indicator such as \"ok\", \"generic-error\", \"partial-completion\", or program-defined states.",
          "recommended-values": {
            "ok": {},
            "generic-error": {},
            "invalid-job-card": {},
            "external-dependency-failure": {},
            "partial-completion": {}
          }
        },
        "exit-code": {
          "type": "integer",
          "description": "Process exit code, if available.",
          "recommended-values": {
            "success (0)": 0,
            "generic-error (1)": 1,
            "invalid-job-card (2)": 2,
            "external-dependency-failure (3)": 3,
            "partial-completion (4)": 4
          }
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp when the report card was written, expressed as seconds since Unix epoch with optional decimal fractions."
        },
        "job-id": {
          "type": "string",
          "description": "Echo of the job-id from the job card, if provided."
        },
        "job-card": {
          "type": "object",
          "description": "Optional full copy of the job card that initiated this execution."
        },
        "events": {
          "type": "array",
          "description": "Optional ordered list of human-readable execution notes. Narrative, not machine-parseable.",
          "items": {
            "type": "string"
          }
        },
        "complex-events": {
          "type": "array",
          "description": "Optional ordered list of structured execution events for machine processing and advanced observability.",
          "items": {
            "type": "object",
            "required_keys": [
              "timestamp",
              "level",
              "kind",
              "msg"
            ],
            "fields": {
              "timestamp": {
                "type": "string",
                "description": "Timestamp when this event occurred, expressed as seconds since Unix epoch with optional decimal fractions."
              },
              "level": {
                "type": "string",
                "description": "Severity level such as \"info\", \"warn\", or \"error\"."
              },
              "kind": {
                "type": "string",
                "description": "Short type string identifying the class of event (e.g., \"file.copy\", \"task.start\")."
              },
              "tags": {
                "type": "array",
                "description": "Optional list of tag strings for filtering and grouping.",
                "items": {
                  "type": "string"
                }
              },
              "msg": {
                "type": "string",
                "description": "Human-readable description of the event."
              },
              "data": {
                "type": "object",
                "description": "Optional structured data payload associated with the event."
              }
            }
          }
        }
      },
      "extension_policy": "Additional STANDARD fields may be added in future versions. Readers must ignore unknown keys."
    },
    "CUSTOM": {
      "description": "Program-specific result data. Structure is entirely defined by the invoked program.",
      "type": "object",
      "extension_policy": "Run Card infrastructure must not interpret CUSTOM contents."
    }
  },

  "behavioral_contract": {
    "job-card": [
      "Caller must write a JSON file matching the Job Card format and provide its path to the program.",
      "Program must treat the Job Card as read-only.",
      "If STANDARD.report-card-file is provided, the program must attempt to write its Report Card to that location."
    ],
    "report-card": [
      "Program should write exactly one Report Card JSON if possible.",
      "Program may include any or none of the STANDARD optional fields.",
      "Program-specific results must be placed under CUSTOM.",
      "Programs and infrastructure must ignore unknown fields to preserve forward compatibility."
    ],
    "lifecycle": [
      "Programs are encouraged to record job-id into the Report Card when provided.",
      "Programs should record timestamps at state transitions or at finalization.",
      "Failure to complete the intended task should be reflected in both status and complete fields when possible."
    ]
  }
}
